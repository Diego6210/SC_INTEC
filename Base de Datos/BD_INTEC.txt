create database bd_intec;

use bd_intec;

CREATE TABLE `cliente` (
  `IdCliente` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `NombreCompania` varchar(70) DEFAULT NULL,
  `NombreContacto` varchar(100) DEFAULT NULL,
  `Domicilio` varchar(150) DEFAULT NULL,
  `Correo` varchar(50) DEFAULT NULL,
  `Telefono` varchar(30) DEFAULT NULL
);

CREATE TABLE `equipo` (
  `IdEquipo` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `Descripcion` varchar(100) DEFAULT NULL,
  `Marca` varchar(50) DEFAULT NULL,
  `Modelo` varchar(50) DEFAULT NULL,
  `NumService` varchar(20) DEFAULT NULL,
  `ClaveId` varchar(50) DEFAULT NULL,
  `AlcanceMedicion` varchar(100) DEFAULT NULL,
  `DivisionMedicion` varchar(100) DEFAULT NULL,
  `IdCliente` int(11) DEFAULT NULL
);


CREATE TABLE `laboratorio` (
  `IdLaboratorio` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `Descripcion_lab` varchar(100) DEFAULT NULL,
  `Domicilio` varchar(50) DEFAULT NULL,
  `Telefono` varchar(20) DEFAULT NULL
);

CREATE TABLE `orden_servicio` (
  `IdOrden` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `IdCliente` int(11) DEFAULT NULL,
  `Fecha` date DEFAULT NULL,
  `FechaEnvio` date DEFAULT NULL,
  `FechaRecibo` date DEFAULT NULL,
  `Observaciones` varchar(200) DEFAULT NULL
);

CREATE TABLE `paquete_envio` (
  `IdPaqueteEnvio` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `IdOrden` int(11) NOT NULL,
  `IdLaboratorio` int(11) DEFAULT NULL,
  `Descripcion` varchar(50) DEFAULT NULL,
  `FechaEnv` date DEFAULT NULL,
  `FechaRecLab` date DEFAULT NULL,
  `FechaFinalCalLab` date DEFAULT NULL,
  `FechaRetLab` date DEFAULT NULL,
  `FechaRecpIntecLab` date DEFAULT NULL,
  `IdEstatusPaquete` int(11) DEFAULT '0'
);

CREATE TABLE `equipo_orden` (
  `IdEquipoOrden` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `IdOrden` int(11) DEFAULT NULL,
  `IdEquipo` int(11) DEFAULT NULL,
  `FechaFinCalLab` date DEFAULT NULL,
  `FechaRetLab` date DEFAULT NULL,
  `FechaRecIntecLab` date DEFAULT NULL,
  `IdEstatusPaquete` int(11) DEFAULT '0',
	Etiqueta tinyint(1) default null,
    Certificado text,
    Factura tinyint(1) default null,
   `IdPaqueteEnvio` int(11) DEFAULT NULL,
  FOREIGN KEY (`IdPaqueteEnvio`) REFERENCES paquete_envio(`IdPaqueteEnvio`)   
);

CREATE TABLE `catalogoestatuspaquetes` (
  `IdEstatusPaquete` int(11),
  `DescripcionEstatusPaquete` varchar(40)
);

CREATE TABLE `perfil` (
  `IdPerfil` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `DescripcionPerfil` varchar(40) COLLATE latin1_spanish_ci NOT NULL
);


CREATE TABLE `usuarios` (
  `IdUsuario` int(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  `NombreUsuario` varchar(20) COLLATE latin1_spanish_ci NOT NULL,
  `ApellidosUsuario` varchar(20) COLLATE latin1_spanish_ci NOT NULL,
  `usuario` varchar(20) COLLATE latin1_spanish_ci NOT NULL,
  `contrasena` varchar(20) COLLATE latin1_spanish_ci NOT NULL,
  `IdPerfil` int(11) NOT NULL
);



INSERT INTO `catalogoestatuspaquetes` (`IdEstatusPaquete`, `DescripcionEstatusPaquete`) VALUES(1, 'Creado'),(2, 'Enviado a Laboratorio'),(3, 'Recibido Laboratorio'),(4, 'Calibración Terminada'),(5, 'En Retorno'),(6, 'Recibido Intec');
-- INSERT INTO `cliente` (`NombreCompania`, `NombreContacto`, `Domicilio`, `Correo`, `Telefono`) VALUES('compañia1', 'contacto1', 'domicilio1', 'correo1', '123456789'),('compañia2', 'contacto2', 'domicilio2', 'correo2', '123456789'),('compañia3', 'contacto3', 'domicilio3', 'correo3', '123456789');
-- INSERT INTO `equipo` (`Descripcion`, `Marca`, `Modelo`, `NumService`, `ClaveId`, `AlcanceMedicion`, `DivisionMedicion`, `IdCliente`) VALUES('descripcion1', 'marca1', 'modelo1', 'numserie1', 'clave1', 'alcance1', 'division1', 1),('descripcion2', 'marca2', 'modelo2', 'numserie2', 'clave2', 'alcance2', 'division2', 2),('descripcion3', 'marca3', 'modelo3', 'numserie3', 'clave3', 'alcance3', 'division3', 2);
INSERT INTO `laboratorio` (`Descripcion_lab`, `Domicilio`, `Telefono`) VALUES('Laboratorio 1', 'Domicilio Laboratorio 1', '111111111'),('Laboratorio 2', 'Domicilio Laboratorio 2', '222222222');
INSERT INTO `perfil` (`IdPerfil`, `DescripcionPerfil`) VALUES(1, 'Administrador');
INSERT INTO `usuarios` (`NombreUsuario`, `ApellidosUsuario`, `usuario`, `contrasena`, `IdPerfil`) VALUES('David', 'Parrito', 'david.parrito', 'Intec@123.', 1),('Diego', 'Garcia', 'diego', '', 1),('Usuario', '', '', '', 1);


LOAD DATA
INFILE 'C:/xampp/htdocs/SC_INTEC/Base de Datos/cliente.csv'
INTO TABLE cliente
CHARACTER SET utf8mb4
COLUMNS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 LINES
(`NombreCompania`, `Domicilio`,  `Telefono`, `NombreContacto`, `Correo`);







select * from usuarios;
select * from cliente;
select * from equipo;
select * from laboratorio;
select * from orden_servicio;
select * from paquete_envio;
select * from equipo_orden;
